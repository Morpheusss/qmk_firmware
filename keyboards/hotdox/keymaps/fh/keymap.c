#include QMK_KEYBOARD_H

#define QWERTY 0
#define NAV    1
#define MOUSE  2
#define DEV    3

// One-shot modifiers are nice but a non option here because in RDC environment
//
// - If capturing key combos locally, xmonad bindings will be first captured
//   by the native Windows system, and thus not work.
// - If capturing key combos remotely, OSM works very unreliably.

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
/*-- Keymap QWERT: Basic layer
 *
 * ,-----------------------------------------------------.           ,-----------------------------------------------------.
 * | TO(QWERTY)|   1  |   2  |   3  |   4  |   5  |XXXXXX|           |Delete|   6  |   7  |   8  |   9  |   0  |  MO(DEV)  |
 * |-----------+------+------+------+------+-------------|           |------+------+------+------+------+------+-----------|
 * |    Tab    |   Q  |   W  |   E  |   R  |   T  |   =  |           |  `   |   Y  |   U  |   I  |   O  |   P  |     \     |
 * |-----------+------+------+------+------+------|      |           |      |------+------+------+------+------+-----------|
 * |     LCtrl |   A  |   S  |   D  |   F  |   G  |------|           |------|   H  |   J  |   K  |   L  |   ;  |     '     |
 * |-----------+------+------+------+------+------|   -  |           |LEADER|------+------+------+------+------+-----------|
 * |    LShift |   Z  |   X  |   C  |   V  |   B  |      |           |      |   N  |   M  |   ,  |   .  |   /  |   RShift  |
 * `-----------+------+------+------+------+-------------'           `-------------+------+------+------+------+-----------'
 *     | LGUI  | LAlt |XXXXXX| Left | Right|                                       |  Up  | Down |   [  |   ]  |MO(NAV)|
 *     |       |      |XXXXXX|      |      |                                       |      |      |      |      |       |
 *     `-----------------------------------'                                       `-----------------------------------'
 *                                           ,-------------.       ,-------------.
 *                                           | Home | RAlt(|       |MO(   | Vol+ |
 *                                           |      | MsMd)|       |MOUSE)|      |
 *                                    ,------|------|------|       |------+------+------.
 *                                    |      |      |  End |       | Vol- |      |      |
 *                                    |Space |Backsp|------|       |------| Esc  |Enter |
 *                                    |      |ace   | PgUp |       | PgDn |      |      |
 *                                    `--------------------'       `--------------------'
 */
[QWERTY] = LAYOUT_ergodox(
        // Left main
           TO(QWERTY),          KC_1,      KC_2,     KC_3,    KC_4,   KC_5,    XXXXXXX,
               KC_TAB,          KC_Q,      KC_W,     KC_E,    KC_R,   KC_T,     KC_EQL,
              KC_LCTL,          KC_A,      KC_S,     KC_D,    KC_F,   KC_G,
              KC_LSFT,          KC_Z,      KC_X,     KC_C,    KC_V,   KC_B,   KC_MINUS,
              KC_LGUI,       KC_LALT,   XXXXXXX,  KC_LEFT, KC_RGHT,

        // Left thumb
                 KC_HOME,  RALT(KC_BTN3),
                                  KC_END,
        KC_SPC,  KC_BSPC,        KC_PGUP,

        // Right main
          KC_DEL,     KC_6,     KC_7,   KC_8,        KC_9,        KC_0,             MO(DEV),
        KC_GRAVE,     KC_Y,     KC_U,   KC_I,        KC_O,        KC_P,             KC_BSLS,
                      KC_H,     KC_J,   KC_K,        KC_L,     KC_SCLN,             KC_QUOT,
          KC_LEAD,    KC_N,     KC_M,   KC_COMM,   KC_DOT,     KC_SLSH,             KC_RSFT,
                               KC_UP,   KC_DOWN,  KC_LBRC,     KC_RBRC,             MO(NAV),

        // Right thumb
          MO(MOUSE),  KC_VOLU,
          KC_VOLD,
          KC_PGDN,     KC_ESC,  KC_ENT
    ),

/* Keymap NAV: Navigations
 *
 * ,--------------------------------------------------.           ,----------------------------------------------------.
 * |        | GUI-1| GUI-2| GUI-3| GUI-4| GUI-5|      |           |       | GUI-6| GUI-7| GUI-8| GUI-9| GUI-0|        |
 * |--------+------+------+------+------+------+------|           |-------+------+------+------+------+------+--------|
 * |        |      | GUI-W|  Up  | GUI-E|      |      |           |       |      |      |      |      |      |        |
 * |--------+------+------+------+------+------|      |           |       |------+------+------+------+------+--------|
 * |        |      | Left | Dowm | Right|      |------|           |-------|      |      |      |      |      |        |
 * |--------+------+------+------+------+------|      |           |       |------+------+------+------+------+--------|
 * |        |      |      |      |      |      |      |           |       |      |      |      |      |      |        |
 * `--------+------+------+------+------+-------------'           `--------------+------+------+------+------+--------'
 *   |      |      |      |      |      |                                        |      |      |      |      |      |
 *   `----------------------------------'                                        `----------------------------------'
 *                                        ,-------------.       ,-------------.
 *                                        |      |      |       |      |      |
 *                                 ,------|------|------|       |------+------+------.
 *                                 |      |      |      |       |      |      |      |
 *                                 |      |      |------|       |------|      |      |
 *                                 |      |      |      |       |      |      |      |
 *                                 `--------------------'       `--------------------'
 */

[NAV] = LAYOUT_ergodox(
        //LEFT HAND
        _______, G(KC_1), G(KC_2), G(KC_3), G(KC_4), G(KC_5), _______,
        _______, _______, G(KC_W),   KC_UP, G(KC_E), _______, _______,
        _______, _______, KC_LEFT, KC_DOWN, KC_RGHT, _______,
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______,
                                                   // LEFT THUMB
                                                   _______, _______,
                                                            _______,
                                                   _______, _______,
                                                            _______,

        //RIGHT HAND
        _______, G(KC_6), G(KC_7), G(KC_8), G(KC_9), G(KC_0), _______,
        _______, _______, _______, _______, _______, _______, _______,
                 _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______,
        // RIGHT THUMB
        _______, _______,
        _______,
        _______,
        _______, _______
    ),

/* Keymap MOUSE: Replace mouse
 *
 * ,--------------------------------------------------.           ,----------------------------------------------------.
 * |        |      |      |      |      |      |      |           |       |      |      |      |      |       |        |
 * |--------+------+------+------+------+-------------|           |-------+------+------+------+------+-------+--------|
 * |        |      | LCLK | MsUp | RCLK |      |      |           |       |      |      |      |      |       |        |
 * |--------+------+------+------+------+------|      |           |       |------+------+------+------+-------+--------|
 * |        | WlUp | MsLt | MsDn | MsRt | WlDn |------|           |-------|      |      |      |      |       |        |
 * |--------+------+------+------+------+------|      |           |       |------+------+------+------+-------+--------|
 * |        |      |      |      |      |      |      |           |       |      |      |      |      |       |        |
 * `--------+------+------+------+------+-------------'           `--------------+------+------+------+-------+--------'
 *   |      |      |      |      |      |                                        |      |      |      |       |      |
 *   `----------------------------------'                                        `-----------------------------------'
 *                                        ,-------------.       ,-------------.
 *                                        |      |      |       |      |      |
 *                                 ,------|------|------|       |------+------+------.
 *                                 |      |      |      |       |      |      |      |
 *                                 |      |      |------|       |------|      |      |
 *                                 |      |      |      |       |      |      |      |
 *                                 `--------------------'       `--------------------'
 */
[MOUSE] = LAYOUT_ergodox(
        //LEFT HAND
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, KC_BTN1, KC_MS_U, KC_BTN2, _______, _______,
        _______, KC_WH_U, KC_MS_L, KC_MS_D, KC_MS_R, KC_WH_D,
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______,
                                                   // LEFT THUMB
                                                   _______, _______,
                                                            _______,
                                                   _______, _______,
                                                            _______,

        //RIGHT HAND
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______, _______, _______,
                 _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______,
        // RIGHT THUMB
        _______, _______,
        _______,
        _______,
        _______, _______
    ),

/* Keymap XX: TEMPLATE
 *
 * ,--------------------------------------------------.           ,----------------------------------------------------.
 * |        |      |      |      |      |      |      |           |       |      |      |      |      |       |        |
 * |--------+------+------+------+------+-------------|           |-------+------+------+------+------+-------+--------|
 * |        |      |      |      |      |      |      |           |       |      |      |      |      |       |        |
 * |--------+------+------+------+------+------|      |           |       |------+------+------+------+-------+--------|
 * |        |      |      |      |      |      |------|           |-------|      |      |      |      |       |        |
 * |--------+------+------+------+------+------|      |           |       |------+------+------+------+-------+--------|
 * |        |      |      |      |      |      |      |           |       |      |      |      |      |       |        |
 * `--------+------+------+------+------+-------------'           `--------------+------+------+------+-------+--------'
 *   |      |      |      |      |      |                                        |      |      |      |       |      |
 *   `----------------------------------'                                        `-----------------------------------'
 *                                        ,-------------.       ,-------------.
 *                                        |      | RESET|       |      |      |
 *                                 ,------|------|------|       |------+------+------.
 *                                 |      |      |      |       |      |      |      |
 *                                 |      |      |------|       |------|      |      |
 *                                 |      |      |      |       |      |      |      |
 *                                 `--------------------'       `--------------------'
 */
[DEV] = LAYOUT_ergodox(
        //LEFT HAND
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______,
                                                   // LEFT THUMB
                                                   _______,   RESET,
                                                            _______,
                                                   _______, _______,
                                                            _______,

        //RIGHT HAND
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______, _______, _______,
                 _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______,
        // RIGHT THUMB
        _______, _______,
        _______,
        _______,
        _______, _______
    ),
/* Keymap XX: TEMPLATE
 *
 * ,--------------------------------------------------.           ,----------------------------------------------------.
 * |        |      |      |      |      |      |      |           |       |      |      |      |      |       |        |
 * |--------+------+------+------+------+-------------|           |-------+------+------+------+------+-------+--------|
 * |        |      |      |      |      |      |      |           |       |      |      |      |      |       |        |
 * |--------+------+------+------+------+------|      |           |       |------+------+------+------+-------+--------|
 * |        |      |      |      |      |      |------|           |-------|      |      |      |      |       |        |
 * |--------+------+------+------+------+------|      |           |       |------+------+------+------+-------+--------|
 * |        |      |      |      |      |      |      |           |       |      |      |      |      |       |        |
 * `--------+------+------+------+------+-------------'           `--------------+------+------+------+-------+--------'
 *   |      |      |      |      |      |                                        |      |      |      |       |      |
 *   `----------------------------------'                                        `-----------------------------------'
 *                                        ,-------------.       ,-------------.
 *                                        |      |      |       |      |      |
 *                                 ,------|------|------|       |------+------+------.
 *                                 |      |      |      |       |      |      |      |
 *                                 |      |      |------|       |------|      |      |
 *                                 |      |      |      |       |      |      |      |
 *                                 `--------------------'       `--------------------'
[_XXLAYER] = LAYOUT_ergodox(
        //LEFT HAND
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______,
                                                   // LEFT THUMB
                                                   _______, _______,
                                                            _______,
                                                   _______, _______,
                                                            _______,

        //RIGHT HAND
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______, _______, _______,
                 _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______, _______, _______,
        _______, _______, _______, _______, _______,
        // RIGHT THUMB
        _______, _______,
        _______,
        _______,
        _______, _______
    ),
 */
};

LEADER_EXTERNS();

void matrix_scan_user(void) {
  LEADER_DICTIONARY() {
    leading = false;
    leader_end();

    SEQ_TWO_KEYS(KC_O, KC_C) {
      SEND_STRING("open Core\n");
    }
    SEQ_TWO_KEYS(KC_O, KC_J) {
      SEND_STRING("open Jane\n");
    }
    SEQ_TWO_KEYS(KC_O, KC_A) {
      SEND_STRING("open Async\n");
    }
    SEQ_TWO_KEYS(KC_O, KC_S) {
      SEND_STRING("open Std_internal\n");
    }
    SEQ_TWO_KEYS(KC_O, KC_R) {
      SEND_STRING("open Rfq_protocol\n");
    }
    SEQ_TWO_KEYS(KC_L, KC_B) {
      SEND_STRING("let%bind ");
    }
    SEQ_TWO_KEYS(KC_L, KC_M) {
      SEND_STRING("let%map ");
    }
  }
}
